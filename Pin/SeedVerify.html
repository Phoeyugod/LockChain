<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LockChain Wallet â€“ PIN</title>
  <link rel="stylesheet" href="pin2.css">
</head>
<body>
<div class="top-bar">
  <h1>LockChain Wallet</h1>
  <div class="lang">HU ğŸ‡­ğŸ‡º</div>
</div>

<div class="pin-card">
  <div class="pin-grid">

    <div class="pin-item"><span>1.</span> <input class="slot"></div>
    <div class="pin-item"><span>7.</span> <input class="slot"></div>

    <div class="pin-item"><span>2.</span> <input class="slot"></div>
    <div class="pin-item"><span>8.</span> <input class="slot"></div>

    <div class="pin-item"><span>3.</span> <input class="slot"></div>
    <div class="pin-item"><span>9.</span> <input class="slot"></div>

    <div class="pin-item"><span>4.</span> <input class="slot"></div>
    <div class="pin-item"><span>10.</span> <input class="slot"></div>

    <div class="pin-item"><span>5.</span> <input class="slot"></div>
    <div class="pin-item"><span>11.</span> <input class="slot"></div>

    <div class="pin-item"><span>6.</span> <input class="slot"></div>
    <div class="pin-item"><span>12.</span> <input class="slot"></div>

  </div>

  <div class="icons">
    <div class="icon danger" id="clearBtn">â›”</div>
    <div class="icon" id="pasteBtn">ğŸ“‹</div>
    <div class="icon" id="toggleSeed">ğŸ‘</div>
  </div>
</div>

<button class="login-btn">Bejelentkezek</button>



<script>
    const inputs = document.querySelectorAll('.slot');
    const verifyBtn = document.querySelector('.login-btn');
    const toggleSeed = document.getElementById('toggleSeed');
    const card = document.querySelector('.pin-card');
  
    const storedSeed = sessionStorage.getItem('seed');
    if (!storedSeed) {
      alert('HiÃ¡nyzÃ³ seed!');
      window.location.href = '../Pin/TarcaLetrehoz.html';
    }
  
    let attempts = 0;
    const MAX = 3;
    let blurred = true;
  
    // ğŸ‘ blur alapbÃ³l
    inputs.forEach(i => i.classList.add('blur'));
  
    toggleSeed.addEventListener('click', () => {
      blurred = !blurred;
      inputs.forEach(i => i.classList.toggle('blur', blurred));
      toggleSeed.textContent = blurred ? 'ğŸ‘' : 'ğŸ™ˆ';
    });
  
    // âŒ¨ï¸ Enter â†’ kÃ¶vetkezÅ‘ mezÅ‘
    inputs.forEach((input, index) => {
      input.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          e.preventDefault();
          if (index < inputs.length - 1) {
            inputs[index + 1].focus();
          }
        }
      });
    });

  const pasteBtn = document.getElementById('pasteBtn');

  pasteBtn.addEventListener('click', () => {
    const storedSeed = sessionStorage.getItem('seed');
    if (!storedSeed) return;

    const words = storedSeed.split(' ');

    if (words.length !== inputs.length) return;

    inputs.forEach((input, index) => {
      input.value = words[index];
    });

    // vizuÃ¡lis feedback
    pasteBtn.textContent = 'âœ…';
    setTimeout(() => pasteBtn.textContent = 'ğŸ“‹', 900);
  });

    // ğŸ” ellenÅ‘rzÃ©s (SZÃ“REND SZÃMÃT)
    verifyBtn.addEventListener('click', () => {
      if (attempts >= MAX) return;
  
      const entered = Array.from(inputs)
        .map(i => i.value.trim().toLowerCase())
        .join(' ');
  
      if (entered === storedSeed.toLowerCase()) {
        sessionStorage.removeItem('seed');
        window.location.href = '../TarcaKesz/TarcaKesz.html';
      } else {
        attempts++;
  
        inputs.forEach(i => i.classList.add('error'));
        card.classList.add('shake');
  
        setTimeout(() => {
          card.classList.remove('shake');
          inputs.forEach(i => i.classList.remove('error'));
        }, 400);
  
        // ğŸ”’ LOCK
        if (attempts >= MAX) {
          verifyBtn.textContent = 'LOCKED';
          verifyBtn.disabled = true;
          inputs.forEach(i => i.disabled = true);
          toggleSeed.style.display = 'none';
        }
      }
    });
  </script>
  

</body>
</html>
